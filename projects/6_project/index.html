<header>
    <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation">
        <div class="container">
            <a class="navbar-brand title font-weight-lighter" href="/"> <span
                    class="font-weight-bold">Geonwoo</span> Lee
            </a>
            <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse"
                    data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                    aria-label="Toggle navigation">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar top-bar"></span>
                <span class="icon-bar middle-bar"></span>
                <span class="icon-bar bottom-bar"></span>
            </button>
            <div class="collapse navbar-collapse text-right" id="navbarNav">
                <ul class="navbar-nav ml-auto flex-nowrap">
                    <li class="nav-item">
                        <a class="nav-link" href="/">about </a>
                    </li>
                    <li class="nav-item ">
                        <a class="nav-link" href="https://chocoboy.tistory.com/">blog </a>
                    </li>
                    <li class="nav-item ">
                        <a class="nav-link" href="/projects/6_project/">chat </a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link " href="/projects/">projects<span class="sr-only">(current)</span> </a>
                    </li>
                    <!--                      <li class="nav-item ">
                                            <a class="nav-link" href="/repositories/">repositories </a>
                                        </li>
                    -->
                    <li class="nav-item ">
                        <a class="nav-link" href="/assets/pdf/geonwooLee_CV.pdf">cv </a>
                    </li>
                    <!--                      <li class="nav-item ">
                                            <a class="nav-link" href="/teaching/">teaching </a>
                                        </li>
                                        <li class="nav-item ">
                                            <a class="nav-link" href="/people/">people </a>
                                        </li>
                    -->
                    <li class="nav-item dropdown ">
                        <!--                         <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                                   data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> -->
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                            <!--                             <a class="dropdown-item " href="/publications/">publications</a> -->
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item " href="/projects/">projects</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item " href="/blog/">blog</a>
                        </div>
                    </li>
                    <!--
                                        <li class="nav-item">
                                            <button id="search-toggle" title="Search" onclick="openSearchModal()">
                                                <span class="nav-link">ctrl k <i class="ti ti-search"></i></span>
                                            </button>
                                        </li>
                    -->
                    <li class="toggle-container">
                        <button id="light-toggle" title="Change theme">
                            <i class="ti ti-sun-moon" id="light-toggle-system"></i>
                            <i class="ti ti-moon-filled" id="light-toggle-dark"></i>
                            <i class="ti ti-sun-filled" id="light-toggle-light"></i>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <progress id="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</header>
<div id="chat-root" style="height:75vh; border:1px solid rgba(0,0,0,.2); border-radius:12px;">
    <div style="padding:12px;font-family:system-ui;">Loading chat-widget.js…</div>
</div>
<script>
    (function () {
        const root = document.getElementById("chat-root");

        // baseurl 문제 피하려고 상대경로 + 캐시버스터
        const src = "../../assets/chat-widget/chat-widget.js?v=" + Date.now();

        const s = document.createElement("script");
        s.src = src;

        s.onload = function () {
            console.log("✅ Loaded:", src);
            console.log("ChatWidget after load:", window.ChatWidget);

            if (!window.ChatWidget || typeof window.ChatWidget.mount !== "function") {
                root.innerHTML =
                    "<div style='padding:12px;font-family:system-ui;color:#b00020'>" +
                    "❌ Script loaded, but window.ChatWidget.mount is missing.<br>" +
                    "→ You are not loading the bundle that exposes window.ChatWidget." +
                    "</div>";
                return;
            }

            window.ChatWidget.mount("#chat-root");
        };

        s.onerror = function () {
            root.innerHTML =
                "<div style='padding:12px;font-family:system-ui;color:#b00020'>" +
                "❌ Failed to load script:<br><code>" + src + "</code><br><br>" +
                "→ Usually 404 or you opened the page as file:// (not via jekyll serve)." +
                "</div>";
        };

        document.head.appendChild(s);
    })();
</script>
<script>
    window.process = window.process || { env: { NODE_ENV: "production" } };
</script>
<script src="/assets/chat-widget/chat-widget.js"></script>
<script>
    window.addEventListener("load", () => window.ChatWidget?.mount?.("#chat-root"));
</script>
<link rel="stylesheet" href="/assets/chat-widget/chat-widget.css">
